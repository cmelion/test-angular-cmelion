/**
 * AngularJS model
 * @version v0.0.0 - 2014-02-18
 * @link 
 * @author 
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */angular.module("ngSymbiosis.model",[]).factory("BaseModel",["$q","$http","$rootScope",function(a,b,c){function d(a){var b=this;if(!a.url)throw new Error("You must specify an url property");this.$settings={urlBase:a.url},delete a.url,this.$set(a),c.$watch(function(){var a=angular.copy(b);for(var c in a)"$"===c.substr(0,1)&&delete a[c];return a},function(a,c){a!==c&&(b.$isDirty=!0,b.$_changeSubscribers.forEach(function(a){a()}))},!0)}return d.prototype={$set:function(a,b){var c=this;b&&(c.$isDirty=!1);for(var d in c)"$"!==d.substr(0,1)&&delete c[d];angular.extend(c,a)},$delete:function(){var a=this;return b.delete(a.$settings.urlBase+"/"+a.id,a).then(function(b){return a.$set(b.data,!0),b})},$save:function(){function a(a){return c.$set(a.data,!0),a}var c=this;return c.id?b.put(c.$settings.urlBase+"/"+c.id,c).then(a):b.post(c.$settings.urlBase,c).then(a)},$_changeSubscribers:[],$isDirty:!1,$onChange:function(a){var b=this;b.$_changeSubscribers.push(a)}},d}]);